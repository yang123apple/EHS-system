# éšæ‚£å·¥ä½œæµå‹åŠ›æµ‹è¯•åˆ†ææŠ¥å‘Š

**è§’è‰²**: EHSç®¡ç†é¡¾é—®ï¼ˆISO 45001ä¸“å®¶ï¼‰ + å·¥ä½œæµå¼•æ“ç³»ç»Ÿæ¶æ„å¸ˆ  
**æ—¥æœŸ**: 2026-01-24  
**ç³»ç»Ÿ**: EHSéšæ‚£ç®¡ç†ç³»ç»Ÿï¼ˆé”‚ç”µæ± ç”Ÿäº§ç¯å¢ƒï¼‰

---

## æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘Šå¯¹éšæ‚£ç®¡ç†å·¥ä½œæµè¿›è¡Œäº†æ·±åº¦å‹åŠ›æµ‹è¯•ï¼Œæ¨¡æ‹Ÿäº†4ä¸ªå…³é”®çš„çœŸå®åœºæ™¯ï¼Œå‘ç°äº†**3ä¸ªä¸¥é‡é£é™©**å’Œ**1ä¸ªåˆè§„æ€§å·®è·**ã€‚è¿™äº›é—®é¢˜åœ¨é«˜é£é™©åˆ¶é€ ç¯å¢ƒä¸­å¯èƒ½å¯¼è‡´**æµç¨‹æ­»é”**ã€**æƒé™é»‘æ´**å’Œ**åˆè§„æ€§è¿è§„**ã€‚

---

## åœºæ™¯1: "ä¹’ä¹“"å¾ªç¯ä¸æ‹’ç»å›é€€

### åœºæ™¯æè¿°
**æµç¨‹**: æ‰§è¡Œè€…æäº¤æ•´æ”¹ â†’ éªŒè¯è€…éªŒæ”¶ â†’ éªŒè¯è€…æ‹’ç»ï¼ˆæ•´æ”¹ä¸åˆæ ¼ï¼‰â†’ å›åˆ°æ•´æ”¹æ­¥éª¤

### å½“å‰å®ç°åˆ†æ

#### ä»£ç è·¯å¾„è¿½è¸ª

1. **æ‹’ç»æ“ä½œå¤„ç†** (`hazardDispatchEngine.ts:283-319`)
```typescript
if (action === DispatchAction.REJECT) {
  if (currentStep?.id === 'verify') {
    // ä»éªŒæ”¶é©³å› -> å›åˆ°æ•´æ”¹æ­¥éª¤
    const rectifyIndex = workflowSteps.findIndex(s => s.id === 'rectify');
    return {
      success: true,
      newStatus: 'rectifying',
      nextStepId: 'rectify',
      nextStepIndex: rectifyIndex
    };
  }
}
```

2. **å¯è§æ€§è¡¨åŒæ­¥** (`hazardVisibility.service.ts:29-96`)
```typescript
export function calculateVisibilityRoles(hazard: {
  reporterId: string;
  dopersonal_ID?: string | null;  // å½“å‰æ‰§è¡Œäºº
  verifierId?: string | null;     // éªŒæ”¶äºº
  // ...
}): VisibilityRole[] {
  // 1. åˆ›å»ºäºº - å§‹ç»ˆå¯è§
  if (hazard.reporterId) {
    roles.push({ userId: hazard.reporterId, role: 'creator' });
  }
  // 2. å½“å‰æ‰§è¡Œäºº
  if (hazard.dopersonal_ID) {
    roles.push({ userId: hazard.dopersonal_ID, role: 'executor' });
  }
  // 5. éªŒæ”¶äºº
  if (hazard.verifierId) {
    roles.push({ userId: hazard.verifierId, role: 'verifier' });
  }
}
```

### é£é™©è¯†åˆ«

#### é—®é¢˜1: éªŒè¯è€…å¯èƒ½å¤±å»å¯è§æ€§è¿½è¸ªèƒ½åŠ›

**é£é™©ç­‰çº§**: ğŸ”´ **é«˜**

**é—®é¢˜æè¿°**:
- å½“çŠ¶æ€ä» `verified` å›åˆ° `rectifying` æ—¶ï¼Œ`dopersonal_ID` ä¼šæ›´æ–°ä¸ºæ‰§è¡Œè€…
- `verifierId` å­—æ®µ**å¯èƒ½ä¿ç•™**ï¼ˆå–å†³äºAPIå®ç°ï¼‰ï¼Œä½†éªŒè¯è€…**ä¸å†æ‹¥æœ‰æ‰§è¡Œæƒé™**
- å¦‚æœéªŒè¯è€…ä¸åœ¨ `dopersonal_ID`ã€`reporterId` æˆ– `ccUsers` ä¸­ï¼Œä»–ä»¬å°†**æ— æ³•è¿½è¸ª**æ•´æ”¹è¿›åº¦

**è¯æ®**:
```typescript
// å¯è§æ€§è®¡ç®—é€»è¾‘ä¸­ï¼ŒéªŒè¯è€…å¯è§æ€§ä»…ä¾èµ–äº verifierId å­—æ®µ
if (hazard.verifierId) {
  roles.push({ userId: hazard.verifierId, role: 'verifier' });
}
```

**å®é™…å½±å“**:
- éªŒè¯è€…æ‹’ç»åï¼Œæ— æ³•æŸ¥çœ‹éšæ‚£æ˜¯å¦è¢«é‡æ–°æ•´æ”¹
- éœ€è¦ç­‰å¾…æ‰§è¡Œè€…å†æ¬¡æäº¤ï¼Œæ‰èƒ½é‡æ–°éªŒæ”¶
- **è¿åISO 45001è¦æ±‚**: éªŒè¯è€…åº”èƒ½è¿½è¸ªå…¶æ‹’ç»çš„éšæ‚£çš„åç»­å¤„ç†

#### é—®é¢˜2: çŠ¶æ€å›é€€æ—¶ verifierId å­—æ®µå¤„ç†ä¸æ˜ç¡®

**é£é™©ç­‰çº§**: ğŸŸ¡ **ä¸­**

**é—®é¢˜æè¿°**:
- ä»£ç ä¸­æœªæ˜ç¡®è¯´æ˜ï¼šæ‹’ç»æ—¶æ˜¯å¦æ¸…ç©º `verifierId`
- å¦‚æœä¸æ¸…ç©ºï¼ŒéªŒè¯è€…ä»å¯è§ï¼ˆé€šè¿‡ `verifierId` è§’è‰²ï¼‰
- å¦‚æœæ¸…ç©ºï¼ŒéªŒè¯è€…ç«‹å³å¤±å»å¯è§æ€§

**å½“å‰ä»£ç è¡Œä¸º**:
- `hazardDispatchEngine.ts` çš„ `getUpdatedHazard` æ–¹æ³•åœ¨ `REJECT` åŠ¨ä½œæ—¶**ä¸åšä»»ä½•æ›´æ–°**
- è¿™æ„å‘³ç€ `verifierId` **ä¸ä¼šè¢«æ¸…ç©º**ï¼ŒéªŒè¯è€…ç†è®ºä¸Šä»å¯è§

**ä½†å­˜åœ¨é£é™©**:
- å¦‚æœæœªæ¥ä»£ç ä¿®æ”¹ï¼Œæ¸…ç©ºäº† `verifierId`ï¼ŒéªŒè¯è€…å°†ç«‹å³å¤±å»å¯è§æ€§
- æ²¡æœ‰æ˜ç¡®çš„ä¸šåŠ¡è§„åˆ™æ–‡æ¡£è¯´æ˜æ­¤è¡Œä¸º

### å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: ä¿ç•™éªŒè¯è€…å¯è§æ€§ï¼ˆæ¨èï¼‰

**ç†ç”±**: ç¬¦åˆISO 45001è¦æ±‚ï¼ŒéªŒè¯è€…åº”èƒ½è¿½è¸ªå…¶æ‹’ç»çš„éšæ‚£

**å®ç°**:
```typescript
// åœ¨ calculateVisibilityRoles ä¸­ï¼Œå¢åŠ "å†å²éªŒè¯è€…"é€»è¾‘
export function calculateVisibilityRoles(hazard: {
  // ... ç°æœ‰å­—æ®µ
  oldVerifiers?: Array<{ userId: string }>; // æ–°å¢ï¼šå†å²éªŒè¯è€…åˆ—è¡¨
}): VisibilityRole[] {
  // ... ç°æœ‰é€»è¾‘
  
  // 6. å†å²éªŒè¯è€…ï¼ˆå³ä½¿å½“å‰ä¸åœ¨éªŒè¯æ­¥éª¤ï¼Œä¹Ÿåº”å¯è§ï¼‰
  if (hazard.oldVerifiers && hazard.oldVerifiers.length > 0) {
    hazard.oldVerifiers.forEach(verifier => {
      const key = `${verifier.userId}-verifier`;
      if (!addedUsers.has(key)) {
        roles.push({ userId: verifier.userId, role: 'verifier' });
        addedUsers.add(key);
      }
    });
  }
  
  // 7. å½“å‰éªŒè¯è€…ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  if (hazard.verifierId) {
    const key = `${hazard.verifierId}-verifier`;
    if (!addedUsers.has(key)) {
      roles.push({ userId: hazard.verifierId, role: 'verifier' });
      addedUsers.add(key);
    }
  }
}
```

**æ•°æ®åº“å˜æ›´**:
```prisma
model HazardRecord {
  // ... ç°æœ‰å­—æ®µ
  oldVerifiers String? // JSONæ ¼å¼ï¼šå­˜å‚¨å†å²éªŒè¯è€…IDåˆ—è¡¨
}
```

#### æ–¹æ¡ˆB: åœ¨æ‹’ç»æ—¶æ˜ç¡®ä¿ç•™éªŒè¯è€…å¯è§æ€§

**å®ç°**:
```typescript
// åœ¨ hazardDispatchEngine.ts çš„ getTransition ä¸­
if (action === DispatchAction.REJECT && currentStep?.id === 'verify') {
  // ç¡®ä¿ verifierId ä¸è¢«æ¸…ç©ºï¼ˆåœ¨APIå±‚å¤„ç†ï¼‰
  // æˆ–è€…åœ¨å¯è§æ€§è®¡ç®—ä¸­ï¼Œå³ä½¿çŠ¶æ€ä¸æ˜¯ verifiedï¼Œä¹Ÿä¿ç•™ verifierId çš„å¯è§æ€§
}
```

**æ¨è**: **æ–¹æ¡ˆA**ï¼Œå› ä¸ºå®ƒæ›´ç¬¦åˆä¸šåŠ¡é€»è¾‘ï¼Œä¸”æ”¯æŒå¤šæ¬¡æ‹’ç»çš„åœºæ™¯ã€‚

---

## åœºæ™¯2: "å­¤å„¿å±é™©"ï¼ˆäººå‘˜å˜æ›´ï¼‰

### åœºæ™¯æè¿°
**æµç¨‹**: æ‰§è¡Œè€…ï¼ˆUser Aï¼‰æ­£åœ¨å¤„ç†éšæ‚£ â†’ User Aç¦»èŒ/è°ƒå²— â†’ è´¦æˆ·è¢«ç¦ç”¨ â†’ éšæ‚£æ— äººå¯è§

### å½“å‰å®ç°åˆ†æ

#### ä»£ç è·¯å¾„è¿½è¸ª

1. **ç”¨æˆ·åˆ é™¤å¤„ç†** (`lib/db.ts:142-198`)
```typescript
async deleteUser(id: string): Promise<{ success: boolean; error?: string }> {
  await prisma.$transaction(async (tx) => {
    // 1. æ¸…é™¤è¯¥ç”¨æˆ·ä¸ŠæŠ¥çš„éšæ‚£è®°å½•ä¸­çš„å…³è”
    await tx.hazardRecord.updateMany({
      where: { reporterId: id },
      data: { reporterId: 'DELETED_USER' } // âš ï¸ è®¾ç½®ä¸ºç‰¹æ®Šæ ‡è®°
    });
    
    // 2. æ¸…é™¤è¯¥ç”¨æˆ·ä½œä¸ºæ•´æ”¹è´£ä»»äººçš„éšæ‚£è®°å½•
    await tx.hazardRecord.updateMany({
      where: { responsibleId: id },
      data: { responsibleId: null, responsibleName: null }
    });
    
    // âš ï¸ é—®é¢˜ï¼šæ²¡æœ‰å¤„ç† dopersonal_IDï¼ˆå½“å‰æ‰§è¡Œäººï¼‰
    // âš ï¸ é—®é¢˜ï¼šæ²¡æœ‰å¤„ç† verifierIdï¼ˆéªŒæ”¶äººï¼‰
    
    // 8. æœ€ååˆ é™¤ç”¨æˆ·
    await tx.user.delete({ where: { id } });
  });
}
```

2. **å¯è§æ€§è¡¨æŸ¥è¯¢** (`hazardVisibility.service.ts:267-350`)
```typescript
export async function getMyHazards(
  userId: string,
  options?: { isAdmin?: boolean; /* ... */ }
) {
  const whereClause = isAdmin 
    ? { ...where, deletedAt: null }  // ç®¡ç†å‘˜ï¼šè·³è¿‡å¯è§æ€§æ£€æŸ¥
    : {
        ...where,
        deletedAt: null,
        visibilityRecords: {
          some: { userId }  // æ™®é€šç”¨æˆ·ï¼šå¿…é¡»å­˜åœ¨äºå¯è§æ€§è¡¨
        }
      };
}
```

### é£é™©è¯†åˆ«

#### é—®é¢˜1: æ‰§è¡Œè€…è´¦æˆ·ç¦ç”¨åï¼Œéšæ‚£æˆä¸º"å­¤å„¿"

**é£é™©ç­‰çº§**: ğŸ”´ **ä¸¥é‡**

**é—®é¢˜æè¿°**:
- å½“ `dopersonal_ID = 'å·²ç¦ç”¨ç”¨æˆ·ID'` æ—¶ï¼Œè¯¥ç”¨æˆ·æ— æ³•ç™»å½•ï¼Œæ— æ³•çœ‹åˆ°éšæ‚£
- åˆ›å»ºè€…ï¼ˆ`reporterId`ï¼‰å¯èƒ½ä¹Ÿæ˜¯å·²åˆ é™¤ç”¨æˆ·ï¼ˆ`'DELETED_USER'`ï¼‰
- æŠ„é€äººï¼ˆ`ccUsers`ï¼‰å¯èƒ½ä¹Ÿå·²ç¦»èŒ
- **ç»“æœ**: åªæœ‰ç®¡ç†å‘˜èƒ½çœ‹åˆ°æ­¤éšæ‚£ï¼Œæ™®é€šç”¨æˆ·æ— æ³•å¤„ç†

**å®é™…å½±å“**:
```
åœºæ™¯ï¼š
1. User Aï¼ˆæ‰§è¡Œè€…ï¼‰æ­£åœ¨å¤„ç†éšæ‚£ H-001
2. User A ç¦»èŒï¼Œè´¦æˆ·è¢«ç¦ç”¨
3. éšæ‚£ H-001 çš„ dopersonal_ID ä»ç„¶æ˜¯ User A çš„ID
4. å¯è§æ€§è¡¨ä¸­ä»æœ‰ User A çš„è®°å½•ï¼ˆrole='executor'ï¼‰
5. ä½† User A æ— æ³•ç™»å½•ï¼Œæ— æ³•å¤„ç†
6. åˆ›å»ºè€… User B ä¹Ÿå¯èƒ½å·²ç¦»èŒï¼ˆreporterId='DELETED_USER'ï¼‰
7. ç»“æœï¼šéšæ‚£ H-001 æˆä¸º"å­¤å„¿"ï¼Œåªæœ‰ç®¡ç†å‘˜èƒ½çœ‹åˆ°
```

**åˆè§„æ€§é£é™©**:
- **è¿åISO 45001 6.1.2.2**: éšæ‚£å¿…é¡»åŠæ—¶å¤„ç†ï¼Œä¸èƒ½å› äººå‘˜å˜æ›´è€Œä¸¢å¤±
- **è¿åISO 45001 7.5.3**: å¿…é¡»ç¡®ä¿éšæ‚£å¤„ç†è´£ä»»çš„è¿ç»­æ€§

#### é—®é¢˜2: ç”¨æˆ·åˆ é™¤æ—¶æœªå¤„ç†å½“å‰æ‰§è¡Œäººå­—æ®µ

**é£é™©ç­‰çº§**: ğŸ”´ **ä¸¥é‡**

**é—®é¢˜æè¿°**:
- `deleteUser` å‡½æ•°åªå¤„ç†äº† `reporterId` å’Œ `responsibleId`
- **æœªå¤„ç†** `dopersonal_ID`ï¼ˆå½“å‰æ‰§è¡Œäººï¼‰
- **æœªå¤„ç†** `verifierId`ï¼ˆéªŒæ”¶äººï¼‰
- **æœªå¤„ç†** `HazardVisibility` è¡¨ä¸­çš„è®°å½•

**ä»£ç è¯æ®**:
```typescript
// lib/db.ts:142-198
// âŒ ç¼ºå¤±ï¼šå¤„ç† dopersonal_ID
// âŒ ç¼ºå¤±ï¼šå¤„ç† verifierId
// âŒ ç¼ºå¤±ï¼šæ¸…ç† HazardVisibility è¡¨ä¸­çš„è¯¥ç”¨æˆ·è®°å½•
```

### å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: è‡ªåŠ¨é‡æ–°åˆ†é…æœºåˆ¶ï¼ˆæ¨èï¼‰

**å®ç°æ­¥éª¤**:

1. **æ‰©å±•ç”¨æˆ·åˆ é™¤é€»è¾‘**:
```typescript
// lib/db.ts
async deleteUser(id: string): Promise<{ success: boolean; error?: string }> {
  await prisma.$transaction(async (tx) => {
    // ... ç°æœ‰é€»è¾‘
    
    // ğŸ†• 3. å¤„ç†è¯¥ç”¨æˆ·ä½œä¸ºå½“å‰æ‰§è¡Œäººçš„éšæ‚£
    const hazardsAsExecutor = await tx.hazardRecord.findMany({
      where: { dopersonal_ID: id, deletedAt: null, status: { not: 'closed' } }
    });
    
    for (const hazard of hazardsAsExecutor) {
      // è‡ªåŠ¨é‡æ–°åˆ†é…ï¼šä¼˜å…ˆåˆ†é…ç»™éƒ¨é—¨è´Ÿè´£äºº
      const deptHead = await findDepartmentHead(hazard.departmentId, tx);
      if (deptHead) {
        await tx.hazardRecord.update({
          where: { id: hazard.id },
          data: {
            dopersonal_ID: deptHead.id,
            dopersonal_Name: deptHead.realName,
            // è®°å½•é‡æ–°åˆ†é…æ—¥å¿—
            logs: appendLog(hazard.logs, {
              operatorName: 'ç³»ç»Ÿ',
              action: 'auto_reassign',
              time: new Date().toISOString(),
              changes: `æ‰§è¡Œäºº ${hazard.dopersonal_Name} å·²ç¦»èŒï¼Œè‡ªåŠ¨é‡æ–°åˆ†é…ç»™éƒ¨é—¨è´Ÿè´£äºº ${deptHead.realName}`
            })
          }
        });
      } else {
        // å¦‚æœæ²¡æœ‰éƒ¨é—¨è´Ÿè´£äººï¼Œåˆ†é…ç»™EHSç®¡ç†å‘˜
        const ehsManager = await findEHSManager(tx);
        if (ehsManager) {
          await tx.hazardRecord.update({
            where: { id: hazard.id },
            data: {
              dopersonal_ID: ehsManager.id,
              dopersonal_Name: ehsManager.realName,
              logs: appendLog(hazard.logs, {
                operatorName: 'ç³»ç»Ÿ',
                action: 'auto_reassign',
                time: new Date().toISOString(),
                changes: `æ‰§è¡Œäºº ${hazard.dopersonal_Name} å·²ç¦»èŒï¼Œè‡ªåŠ¨é‡æ–°åˆ†é…ç»™EHSç®¡ç†å‘˜ ${ehsManager.realName}`
              })
            }
          });
        }
      }
      
      // åŒæ­¥å¯è§æ€§è¡¨
      await syncHazardVisibility(hazard.id, tx);
    }
    
    // ğŸ†• 4. å¤„ç†è¯¥ç”¨æˆ·ä½œä¸ºéªŒæ”¶äººçš„éšæ‚£
    const hazardsAsVerifier = await tx.hazardRecord.findMany({
      where: { verifierId: id, deletedAt: null, status: { not: 'closed' } }
    });
    
    for (const hazard of hazardsAsVerifier) {
      // æ¸…ç©ºéªŒæ”¶äººï¼Œç­‰å¾…é‡æ–°æŒ‡æ´¾
      await tx.hazardRecord.update({
        where: { id: hazard.id },
        data: { verifierId: null, verifierName: null }
      });
      await syncHazardVisibility(hazard.id, tx);
    }
    
    // ğŸ†• 5. æ¸…ç†å¯è§æ€§è¡¨ä¸­çš„è¯¥ç”¨æˆ·è®°å½•
    await tx.hazardVisibility.deleteMany({
      where: { userId: id }
    });
    
    // ... ç»§ç»­åˆ é™¤ç”¨æˆ·
  });
}
```

2. **å¢åŠ éƒ¨é—¨è´Ÿè´£äººæŸ¥è¯¢å‡½æ•°**:
```typescript
async function findDepartmentHead(
  deptId: string | null,
  tx: any
): Promise<{ id: string; realName: string } | null> {
  if (!deptId) return null;
  
  const dept = await tx.department.findUnique({
    where: { id: deptId },
    include: {
      users: {
        where: {
          role: { contains: 'ä¸»ç®¡' },
          deletedAt: null
        },
        take: 1
      }
    }
  });
  
  if (dept?.users?.[0]) {
    return { id: dept.users[0].id, realName: dept.users[0].realName };
  }
  
  return null;
}
```

#### æ–¹æ¡ˆB: éƒ¨é—¨è´Ÿè´£äººè‡ªåŠ¨å¯è§ï¼ˆç®€åŒ–ç‰ˆï¼‰

**å®ç°**:
```typescript
// åœ¨ calculateVisibilityRoles ä¸­å¢åŠ éƒ¨é—¨è´Ÿè´£äººå¯è§æ€§
export function calculateVisibilityRoles(hazard: {
  // ... ç°æœ‰å­—æ®µ
  departmentId?: string | null;
  department?: { headId?: string | null };
}): VisibilityRole[] {
  // ... ç°æœ‰é€»è¾‘
  
  // ğŸ†• 8. éƒ¨é—¨è´Ÿè´£äººï¼ˆä½œä¸ºåå¤‡å¯è§æ€§ï¼‰
  if (hazard.department?.headId) {
    const key = `${hazard.department.headId}-dept_head`;
    if (!addedUsers.has(key)) {
      roles.push({ userId: hazard.department.headId, role: 'dept_head' });
      addedUsers.add(key);
    }
  }
}
```

**æ¨è**: **æ–¹æ¡ˆA + æ–¹æ¡ˆBç»„åˆ**ï¼Œæ—¢è§£å†³å½“å‰é—®é¢˜ï¼Œåˆé¢„é˜²æœªæ¥é—®é¢˜ã€‚

---

## åœºæ™¯3: "é«˜é£é™©"å‡çº§é™·é˜±

### åœºæ™¯æè¿°
**æµç¨‹**: ç”¨æˆ·ä¸ŠæŠ¥"å…³é”®/å±åŠç”Ÿå‘½"éšæ‚£ï¼ˆ`riskLevel='critical'`ï¼‰â†’ ç³»ç»ŸæŒ‰æ ‡å‡†æµç¨‹å¤„ç† â†’ å¯èƒ½å“åº”ä¸åŠæ—¶

### å½“å‰å®ç°åˆ†æ

#### ä»£ç è·¯å¾„è¿½è¸ª

1. **é£é™©ç­‰çº§å®šä¹‰** (`prisma/schema.prisma:143`)
```prisma
model HazardRecord {
  riskLevel String @default("low")  // low, medium, high, critical
  // ...
}
```

2. **éšæ‚£åˆ›å»ºæµç¨‹** (`app/api/hazards/route.ts:702-1004`)
```typescript
export const POST = async (request: NextRequest, context, user) => {
  // ... åˆ›å»ºéšæ‚£è®°å½•
  const res = await prisma.hazardRecord.create({ data: validData });
  
  // ä½¿ç”¨æ´¾å‘å¼•æ“åˆå§‹åŒ–å·¥ä½œæµ
  const dispatchResult = await HazardDispatchEngine.dispatch({
    hazard: res,
    action: DispatchAction.SUBMIT,
    // ...
  });
  
  // âš ï¸ é—®é¢˜ï¼šæ²¡æœ‰é’ˆå¯¹ riskLevel='critical' çš„ç‰¹æ®Šå¤„ç†
}
```

3. **å·¥ä½œæµæ­¥éª¤é…ç½®** (å‡è®¾æ ‡å‡†æµç¨‹)
```
1. ä¸ŠæŠ¥ (report) â†’ 2. æŒ‡æ´¾ (assign) â†’ 3. æ•´æ”¹ (rectify) â†’ 4. éªŒæ”¶ (verify)
```

### é£é™©è¯†åˆ«

#### é—®é¢˜1: å…³é”®éšæ‚£æ²¡æœ‰å¿«é€Ÿé€šé“

**é£é™©ç­‰çº§**: ğŸ”´ **ä¸¥é‡**

**é—®é¢˜æè¿°**:
- æ ‡å‡†æµç¨‹ï¼šä¸ŠæŠ¥ â†’ æŒ‡æ´¾ â†’ æ•´æ”¹ â†’ éªŒæ”¶
- å¯¹äº `riskLevel='critical'` çš„éšæ‚£ï¼Œå¯èƒ½éœ€è¦ï¼š
  - **ç«‹å³åœäº§**ï¼ˆå¦‚æœæ¶‰åŠç”Ÿäº§å®‰å…¨ï¼‰
  - **ç«‹å³é€šçŸ¥å®‰å…¨æ€»ç›‘**
  - **è·³è¿‡æŸäº›å®¡æ‰¹æ­¥éª¤**
  - **ç¼©çŸ­æ•´æ”¹æœŸé™**

**å½“å‰å®ç°**:
- âŒ æ²¡æœ‰é’ˆå¯¹ `riskLevel='critical'` çš„ç‰¹æ®Šå¤„ç†
- âŒ æ²¡æœ‰è‡ªåŠ¨é€šçŸ¥å®‰å…¨æ€»ç›‘çš„æœºåˆ¶
- âŒ æ²¡æœ‰å¼ºåˆ¶ç¼©çŸ­æ•´æ”¹æœŸé™çš„é€»è¾‘
- âŒ æ²¡æœ‰è·³è¿‡å®¡æ‰¹æ­¥éª¤çš„å¿«é€Ÿé€šé“

**åˆè§„æ€§é£é™©**:
- **è¿åISO 45001 6.1.2.2**: é‡å¤§é£é™©å¿…é¡»ç«‹å³å¤„ç†
- **è¿åISO 45001 8.1**: ç´§æ€¥æƒ…å†µå¿…é¡»ç«‹å³å“åº”

#### é—®é¢˜2: å¯è§æ€§è§„åˆ™æœªè€ƒè™‘é£é™©ç­‰çº§

**é£é™©ç­‰çº§**: ğŸŸ¡ **ä¸­**

**é—®é¢˜æè¿°**:
- å½“å‰å¯è§æ€§è§„åˆ™ä»…åŸºäºè§’è‰²ï¼ˆåˆ›å»ºè€…ã€æ‰§è¡Œè€…ã€æŠ„é€äººï¼‰
- å¯¹äºå…³é”®éšæ‚£ï¼Œ**å®‰å…¨æ€»ç›‘**åº”è¯¥è‡ªåŠ¨å¯è§ï¼Œå³ä½¿ä¸åœ¨æ ‡å‡†å¯è§æ€§åˆ—è¡¨ä¸­

**å½“å‰å®ç°**:
```typescript
// calculateVisibilityRoles ä¸­æ²¡æœ‰è€ƒè™‘ riskLevel
export function calculateVisibilityRoles(hazard: {
  // ... æ²¡æœ‰ riskLevel å­—æ®µ
}): VisibilityRole[] {
  // ... ä»…åŸºäºè§’è‰²è®¡ç®—
}
```

### å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: å…³é”®éšæ‚£å¿«é€Ÿé€šé“ï¼ˆæ¨èï¼‰

**å®ç°æ­¥éª¤**:

1. **æ‰©å±•æ´¾å‘å¼•æ“ï¼Œæ”¯æŒé£é™©ç­‰çº§åˆ¤æ–­**:
```typescript
// hazardDispatchEngine.ts
static async dispatch(context: DispatchContext): Promise<DispatchResult> {
  const { hazard, action, /* ... */ } = context;
  
  // ğŸ†• å…³é”®éšæ‚£ç‰¹æ®Šå¤„ç†
  if (hazard.riskLevel === 'critical' && action === DispatchAction.SUBMIT) {
    // 1. å¼ºåˆ¶ç¼©çŸ­æ•´æ”¹æœŸé™ï¼ˆ1å¤©å†…ï¼‰
    const criticalDeadline = new Date();
    criticalDeadline.setHours(23, 59, 59, 999);
    criticalDeadline.setDate(criticalDeadline.getDate() + 1);
    
    // 2. è‡ªåŠ¨é€šçŸ¥å®‰å…¨æ€»ç›‘
    const safetyDirector = await findSafetyDirector(allUsers);
    if (safetyDirector) {
      // æ·»åŠ åˆ°æŠ„é€äººåˆ—è¡¨ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
      ccResult.userIds.unshift(safetyDirector.id);
      ccResult.userNames.unshift(safetyDirector.realName);
      
      // ç”Ÿæˆç´§æ€¥é€šçŸ¥
      notifications.push({
        userId: safetyDirector.id,
        type: 'urgent',
        title: `ğŸš¨ å…³é”®éšæ‚£ï¼š${hazard.code}`,
        content: `å‘ç°å…³é”®éšæ‚£ï¼ˆ${hazard.location}ï¼‰ï¼Œè¯·ç«‹å³å¤„ç†ï¼`,
        relatedType: 'hazard',
        relatedId: hazard.id
      });
    }
    
    // 3. è·³è¿‡æŸäº›å®¡æ‰¹æ­¥éª¤ï¼ˆå¦‚æœé…ç½®å…è®¸ï¼‰
    // ä¾‹å¦‚ï¼šç›´æ¥è¿›å…¥æ•´æ”¹æ­¥éª¤ï¼Œè·³è¿‡æŒ‡æ´¾å®¡æ‰¹
    if (workflowConfig.allowCriticalSkipApproval) {
      // ç›´æ¥è·³åˆ°æ•´æ”¹æ­¥éª¤
      transition.nextStepIndex = findStepIndex('rectify', workflowSteps);
    }
  }
  
  // ... ç»§ç»­æ­£å¸¸æµç¨‹
}
```

2. **æ‰©å±•å¯è§æ€§è®¡ç®—ï¼ŒåŒ…å«å®‰å…¨æ€»ç›‘**:
```typescript
// hazardVisibility.service.ts
export function calculateVisibilityRoles(hazard: {
  riskLevel?: string;
  // ... ç°æœ‰å­—æ®µ
}): VisibilityRole[] {
  // ... ç°æœ‰é€»è¾‘
  
  // ğŸ†• 9. å…³é”®éšæ‚£ï¼šå®‰å…¨æ€»ç›‘è‡ªåŠ¨å¯è§
  if (hazard.riskLevel === 'critical' || hazard.riskLevel === 'major') {
    // æŸ¥è¯¢å®‰å…¨æ€»ç›‘ï¼ˆEHSç®¡ç†å‘˜ï¼‰
    // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦åœ¨è°ƒç”¨æ—¶ä¼ å…¥ allUsersï¼Œæˆ–è€…æŸ¥è¯¢æ•°æ®åº“
    // ä¸ºäº†æ€§èƒ½ï¼Œå»ºè®®åœ¨è°ƒç”¨ calculateVisibilityRoles å‰æŸ¥è¯¢
  }
}
```

3. **æ•°æ®åº“é…ç½®è¡¨**:
```prisma
model HazardConfig {
  // ... ç°æœ‰å­—æ®µ
  key String @unique
  value String
}

// é…ç½®é¡¹ï¼š
// key: 'critical_hazard_safety_director_id'
// value: 'user-id-of-safety-director'
```

#### æ–¹æ¡ˆB: å·¥ä½œæµé…ç½®æ”¯æŒé£é™©ç­‰çº§è·¯ç”±

**å®ç°**:
```typescript
// åœ¨å·¥ä½œæµé…ç½®ä¸­ï¼Œæ”¯æŒåŸºäºé£é™©ç­‰çº§çš„æ­¥éª¤è·¯ç”±
interface HazardWorkflowStep {
  id: string;
  name: string;
  // ... ç°æœ‰å­—æ®µ
  riskLevelRouting?: {
    critical?: {
      skipSteps?: string[];  // è·³è¿‡å“ªäº›æ­¥éª¤
      notifyUsers?: string[];  // è‡ªåŠ¨é€šçŸ¥å“ªäº›ç”¨æˆ·
      deadlineDays?: number;  // æ•´æ”¹æœŸé™ï¼ˆå¤©ï¼‰
    };
  };
}
```

**æ¨è**: **æ–¹æ¡ˆA + æ–¹æ¡ˆBç»„åˆ**ï¼Œæ—¢è§£å†³å½“å‰é—®é¢˜ï¼Œåˆæä¾›çµæ´»çš„é…ç½®èƒ½åŠ›ã€‚

---

## åœºæ™¯4: "æ— é™ç­‰å¾…"ï¼ˆè¶…æ—¶å¤„ç†ï¼‰

### åœºæ™¯æè¿°
**æµç¨‹**: æ‰§è¡Œè€…æ”¶åˆ°éšæ‚£ â†’ æ‰§è¡Œè€…å¿½ç•¥éšæ‚£30å¤© â†’ éšæ‚£é€¾æœŸ â†’ æ— äººå¤„ç†

### å½“å‰å®ç°åˆ†æ

#### ä»£ç è·¯å¾„è¿½è¸ª

1. **æ•´æ”¹æœŸé™å­—æ®µ** (`prisma/schema.prisma:158`)
```prisma
model HazardRecord {
  deadline DateTime?  // æ•´æ”¹æœŸé™
  // ...
}
```

2. **å‰ç«¯é€¾æœŸæ˜¾ç¤º** (`app/hidden-danger/_components/views/HazardDataTable.tsx:243-254`)
```typescript
const getDeadlineInfo = () => {
  if (!h.deadline) return null;
  const dueDate = new Date(h.deadline);
  const now = new Date();
  const diffDays = Math.ceil((dueDate.getTime() - now.getTime()) / (1000 * 3600 * 24));
  
  if (diffDays < 0) {
    return {
      label: `å·²é€¾æœŸ${Math.abs(diffDays)}å¤©`,
      className: 'text-red-600 font-bold',
      animate: true
    };
  }
}
```

3. **åç«¯æŸ¥è¯¢** (`app/api/hazards/route.ts`)
```typescript
// âš ï¸ é—®é¢˜ï¼šæ²¡æœ‰è‡ªåŠ¨å‡çº§é€»è¾‘
// âš ï¸ é—®é¢˜ï¼šæ²¡æœ‰è¶…æ—¶å¤„ç†æœºåˆ¶
```

### é£é™©è¯†åˆ«

#### é—®é¢˜1: æ²¡æœ‰è‡ªåŠ¨å‡çº§æœºåˆ¶

**é£é™©ç­‰çº§**: ğŸ”´ **ä¸¥é‡**

**é—®é¢˜æè¿°**:
- éšæ‚£é€¾æœŸåï¼Œåªæœ‰å‰ç«¯æ˜¾ç¤º"å·²é€¾æœŸXå¤©"
- **æ²¡æœ‰è‡ªåŠ¨é€šçŸ¥**æ‰§è¡Œè€…çš„ä¸Šçº§
- **æ²¡æœ‰è‡ªåŠ¨å‡çº§**ç»™éƒ¨é—¨è´Ÿè´£äºº
- **æ²¡æœ‰è‡ªåŠ¨å‡çº§**ç»™EHSç®¡ç†å‘˜

**å®é™…å½±å“**:
```
åœºæ™¯ï¼š
1. æ‰§è¡Œè€… User A æ”¶åˆ°éšæ‚£ H-001ï¼Œdeadline = 2026-01-15
2. User A å¿½ç•¥éšæ‚£ï¼Œæœªå¤„ç†
3. 2026-01-16ï¼šéšæ‚£é€¾æœŸ1å¤©ï¼Œå‰ç«¯æ˜¾ç¤ºçº¢è‰²ï¼Œä½† User A ä»ä¸å¤„ç†
4. 2026-01-20ï¼šéšæ‚£é€¾æœŸ5å¤©ï¼Œä»æ— äººå¤„ç†
5. 2026-01-30ï¼šéšæ‚£é€¾æœŸ15å¤©ï¼Œåªæœ‰ç®¡ç†å‘˜èƒ½çœ‹åˆ°ï¼Œä½†å¯èƒ½æœªæ³¨æ„åˆ°
6. ç»“æœï¼šéšæ‚£é•¿æœŸæ— äººå¤„ç†ï¼Œè¿åISO 45001è¦æ±‚
```

**åˆè§„æ€§é£é™©**:
- **è¿åISO 45001 6.1.2.2**: éšæ‚£å¿…é¡»åŠæ—¶å¤„ç†ï¼Œä¸èƒ½æ— é™æœŸæ‹–å»¶
- **è¿åISO 45001 9.1.1**: å¿…é¡»ç›‘æ§éšæ‚£å¤„ç†è¿›åº¦

#### é—®é¢˜2: é€¾æœŸéšæ‚£çš„å¯è§æ€§æœªæ‰©å±•

**é£é™©ç­‰çº§**: ğŸŸ¡ **ä¸­**

**é—®é¢˜æè¿°**:
- å½“å‰å¯è§æ€§è§„åˆ™ï¼šåˆ›å»ºè€…ã€æ‰§è¡Œè€…ã€æŠ„é€äºº
- é€¾æœŸåï¼Œ**æ‰§è¡Œè€…çš„ä¸Šçº§**åº”è¯¥è‡ªåŠ¨å¯è§
- é€¾æœŸè¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚7å¤©ï¼‰ï¼Œ**EHSç®¡ç†å‘˜**åº”è¯¥è‡ªåŠ¨å¯è§

**å½“å‰å®ç°**:
```typescript
// calculateVisibilityRoles ä¸­æ²¡æœ‰è€ƒè™‘ deadline
export function calculateVisibilityRoles(hazard: {
  // ... æ²¡æœ‰ deadline å­—æ®µ
}): VisibilityRole[] {
  // ... ä»…åŸºäºè§’è‰²è®¡ç®—
}
```

### å»ºè®®ä¿®å¤æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: å®šæ—¶ä»»åŠ¡è‡ªåŠ¨å‡çº§ï¼ˆæ¨èï¼‰

**å®ç°æ­¥éª¤**:

1. **åˆ›å»ºå®šæ—¶ä»»åŠ¡æœåŠ¡**:
```typescript
// services/hazardEscalation.service.ts
import { prisma } from '@/lib/prisma';
import { syncHazardVisibility } from './hazardVisibility.service';
import { HazardNotificationService } from './hazardNotification.service';

/**
 * æ£€æŸ¥é€¾æœŸéšæ‚£å¹¶è‡ªåŠ¨å‡çº§
 * å»ºè®®ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œï¼ˆé€šè¿‡ cron æˆ–å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨ï¼‰
 */
export async function checkAndEscalateOverdueHazards(): Promise<{
  checked: number;
  escalated: number;
  errors: Array<{ hazardId: string; error: string }>;
}> {
  const result = {
    checked: 0,
    escalated: 0,
    errors: [] as Array<{ hazardId: string; error: string }>
  };
  
  const now = new Date();
  
  // 1. æŸ¥è¯¢æ‰€æœ‰æœªé—­ç¯ä¸”å·²é€¾æœŸçš„éšæ‚£
  const overdueHazards = await prisma.hazardRecord.findMany({
    where: {
      deletedAt: null,
      status: { not: 'closed' },
      deadline: { lt: now }  // æˆªæ­¢æ—¥æœŸå·²è¿‡
    },
    include: {
      department: {
        include: {
          users: {
            where: {
              role: { contains: 'ä¸»ç®¡' },
              deletedAt: null
            },
            take: 1
          }
        }
      }
    }
  });
  
  result.checked = overdueHazards.length;
  
  for (const hazard of overdueHazards) {
    try {
      const daysOverdue = Math.floor(
        (now.getTime() - new Date(hazard.deadline!).getTime()) / (1000 * 60 * 60 * 24)
      );
      
      // 2. æ ¹æ®é€¾æœŸå¤©æ•°å†³å®šå‡çº§çº§åˆ«
      let escalationLevel: 'supervisor' | 'dept_head' | 'ehs_manager' = 'supervisor';
      if (daysOverdue >= 7) {
        escalationLevel = 'ehs_manager';
      } else if (daysOverdue >= 3) {
        escalationLevel = 'dept_head';
      }
      
      // 3. æ‰§è¡Œå‡çº§
      await escalateHazard(hazard, escalationLevel, daysOverdue);
      
      result.escalated++;
    } catch (error) {
      result.errors.push({
        hazardId: hazard.id,
        error: error instanceof Error ? error.message : String(error)
      });
    }
  }
  
  return result;
}

/**
 * å‡çº§éšæ‚£
 */
async function escalateHazard(
  hazard: any,
  level: 'supervisor' | 'dept_head' | 'ehs_manager',
  daysOverdue: number
): Promise<void> {
  const usersToNotify: Array<{ id: string; name: string }> = [];
  
  // 1. æŸ¥æ‰¾éœ€è¦é€šçŸ¥çš„ç”¨æˆ·
  if (level === 'supervisor') {
    // é€šçŸ¥æ‰§è¡Œè€…çš„ç›´æ¥ä¸Šçº§
    if (hazard.dopersonal_ID) {
      const executor = await prisma.user.findUnique({
        where: { id: hazard.dopersonal_ID },
        select: { supervisorId: true, supervisor: { select: { id: true, realName: true } } }
      });
      if (executor?.supervisor) {
        usersToNotify.push({
          id: executor.supervisor.id,
          name: executor.supervisor.realName
        });
      }
    }
  } else if (level === 'dept_head') {
    // é€šçŸ¥éƒ¨é—¨è´Ÿè´£äºº
    if (hazard.department?.users?.[0]) {
      usersToNotify.push({
        id: hazard.department.users[0].id,
        name: hazard.department.users[0].realName
      });
    }
  } else if (level === 'ehs_manager') {
    // é€šçŸ¥EHSç®¡ç†å‘˜
    const ehsManagers = await prisma.user.findMany({
      where: {
        role: { contains: 'EHS' },
        deletedAt: null
      },
      take: 1
    });
    if (ehsManagers.length > 0) {
      usersToNotify.push({
        id: ehsManagers[0].id,
        name: ehsManagers[0].realName
      });
    }
  }
  
  // 2. æ‰©å±•å¯è§æ€§ï¼ˆå°†å‡çº§ç”¨æˆ·æ·»åŠ åˆ°å¯è§æ€§è¡¨ï¼‰
  if (usersToNotify.length > 0) {
    // æ–¹æ³•1ï¼šæ·»åŠ åˆ°æŠ„é€äººåˆ—è¡¨ï¼ˆæ¨èï¼Œå› ä¸ºä¼šè§¦å‘é€šçŸ¥ï¼‰
    await prisma.hazardCC.createMany({
      data: usersToNotify.map(u => ({
        hazardId: hazard.id,
        userId: u.id,
        userName: u.name
      })),
      skipDuplicates: true
    });
    
    // æ–¹æ³•2ï¼šåŒæ­¥å¯è§æ€§è¡¨
    await syncHazardVisibility(hazard.id);
    
    // 3. å‘é€é€šçŸ¥
    for (const user of usersToNotify) {
      await HazardNotificationService.createNotification({
        userId: user.id,
        type: 'urgent',
        title: `âš ï¸ éšæ‚£é€¾æœŸ${daysOverdue}å¤©ï¼š${hazard.code}`,
        content: `éšæ‚£"${hazard.location}"å·²é€¾æœŸ${daysOverdue}å¤©ï¼Œè¯·ç«‹å³å¤„ç†ï¼`,
        relatedType: 'hazard',
        relatedId: hazard.id
      });
    }
    
    // 4. è®°å½•å‡çº§æ—¥å¿—
    const logEntry = {
      operatorName: 'ç³»ç»Ÿ',
      action: 'escalate',
      time: new Date().toISOString(),
      changes: `éšæ‚£é€¾æœŸ${daysOverdue}å¤©ï¼Œè‡ªåŠ¨å‡çº§ç»™${usersToNotify.map(u => u.name).join('ã€')}`
    };
    
    await prisma.hazardRecord.update({
      where: { id: hazard.id },
      data: {
        logs: appendLog(hazard.logs, logEntry)
      }
    });
  }
}
```

2. **é…ç½®å®šæ—¶ä»»åŠ¡** (ä½¿ç”¨ node-cron æˆ–ç±»ä¼¼åº“):
```typescript
// lib/startup.ts æˆ–å•ç‹¬çš„ä»»åŠ¡è°ƒåº¦æ–‡ä»¶
import cron from 'node-cron';
import { checkAndEscalateOverdueHazards } from '@/services/hazardEscalation.service';

// æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
cron.schedule('0 2 * * *', async () => {
  console.log('[å®šæ—¶ä»»åŠ¡] å¼€å§‹æ£€æŸ¥é€¾æœŸéšæ‚£...');
  const result = await checkAndEscalateOverdueHazards();
  console.log(`[å®šæ—¶ä»»åŠ¡] å®Œæˆï¼šæ£€æŸ¥${result.checked}æ¡ï¼Œå‡çº§${result.escalated}æ¡`);
});
```

#### æ–¹æ¡ˆB: å®æ—¶æ£€æŸ¥ï¼ˆæ€§èƒ½ä¼˜åŒ–ç‰ˆï¼‰

**å®ç°**:
```typescript
// åœ¨éšæ‚£æŸ¥è¯¢æ—¶ï¼Œå®æ—¶æ£€æŸ¥é€¾æœŸå¹¶æ‰©å±•å¯è§æ€§
export async function getMyHazards(userId: string, options?: any) {
  // ... ç°æœ‰æŸ¥è¯¢é€»è¾‘
  
  // ğŸ†• å®æ—¶æ£€æŸ¥ï¼šå¦‚æœæŸ¥è¯¢ç»“æœä¸­æœ‰é€¾æœŸéšæ‚£ï¼Œè‡ªåŠ¨æ‰©å±•å¯è§æ€§
  const overdueHazards = hazards.filter(h => {
    if (!h.deadline) return false;
    return new Date(h.deadline) < new Date();
  });
  
  // å¼‚æ­¥å¤„ç†ï¼ˆä¸é˜»å¡æŸ¥è¯¢ï¼‰
  if (overdueHazards.length > 0) {
    setImmediate(() => {
      overdueHazards.forEach(h => {
        checkAndEscalateIfNeeded(h.id).catch(console.error);
      });
    });
  }
  
  return { data: hazards, total, /* ... */ };
}
```

**æ¨è**: **æ–¹æ¡ˆAï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰**ï¼Œå› ä¸ºï¼š
1. æ€§èƒ½æ›´å¥½ï¼ˆæ‰¹é‡å¤„ç†ï¼‰
2. ä¸ä¼šå½±å“å®æ—¶æŸ¥è¯¢æ€§èƒ½
3. å¯ä»¥é›†ä¸­è®°å½•å‡çº§æ—¥å¿—

---

## æ€»ç»“ä¸ä¼˜å…ˆçº§

### é£é™©æ±‡æ€»

| åœºæ™¯ | é£é™©ç­‰çº§ | åˆè§„æ€§å½±å“ | å»ºè®®ä¼˜å…ˆçº§ |
|------|---------|-----------|----------|
| åœºæ™¯1: ä¹’ä¹“å¾ªç¯ | ğŸ”´ é«˜ | ISO 45001 éªŒè¯è¿½è¸ªè¦æ±‚ | P1 |
| åœºæ™¯2: å­¤å„¿å±é™© | ğŸ”´ ä¸¥é‡ | ISO 45001 è´£ä»»è¿ç»­æ€§ | P0 |
| åœºæ™¯3: é«˜é£é™©å‡çº§ | ğŸ”´ ä¸¥é‡ | ISO 45001 é‡å¤§é£é™©å¤„ç† | P0 |
| åœºæ™¯4: æ— é™ç­‰å¾… | ğŸ”´ ä¸¥é‡ | ISO 45001 åŠæ—¶å¤„ç†è¦æ±‚ | P0 |

### ä¿®å¤å»ºè®®

1. **ç«‹å³ä¿®å¤ï¼ˆP0ï¼‰**:
   - åœºæ™¯2: ç”¨æˆ·åˆ é™¤æ—¶è‡ªåŠ¨é‡æ–°åˆ†é…éšæ‚£
   - åœºæ™¯3: å…³é”®éšæ‚£å¿«é€Ÿé€šé“å’Œè‡ªåŠ¨é€šçŸ¥
   - åœºæ™¯4: é€¾æœŸéšæ‚£è‡ªåŠ¨å‡çº§æœºåˆ¶

2. **çŸ­æœŸä¿®å¤ï¼ˆP1ï¼‰**:
   - åœºæ™¯1: æ‹’ç»æ—¶ä¿ç•™éªŒè¯è€…å¯è§æ€§

3. **é•¿æœŸä¼˜åŒ–ï¼ˆP2ï¼‰**:
   - å¢åŠ éšæ‚£å¤„ç†SLAç›‘æ§
   - å¢åŠ éšæ‚£å¤„ç†æ•ˆç‡æŠ¥è¡¨
   - å¢åŠ è‡ªåŠ¨æé†’æœºåˆ¶ï¼ˆé€¾æœŸå‰3å¤©ã€1å¤©ï¼‰

---

## é™„å½•ï¼šä»£ç ä¿®å¤ç¤ºä¾‹

### ä¿®å¤1: ç”¨æˆ·åˆ é™¤æ—¶è‡ªåŠ¨é‡æ–°åˆ†é…

è§"åœºæ™¯2"çš„"æ–¹æ¡ˆA"å®ç°ã€‚

### ä¿®å¤2: å…³é”®éšæ‚£å¿«é€Ÿé€šé“

è§"åœºæ™¯3"çš„"æ–¹æ¡ˆA"å®ç°ã€‚

### ä¿®å¤3: é€¾æœŸéšæ‚£è‡ªåŠ¨å‡çº§

è§"åœºæ™¯4"çš„"æ–¹æ¡ˆA"å®ç°ã€‚

### ä¿®å¤4: æ‹’ç»æ—¶ä¿ç•™éªŒè¯è€…å¯è§æ€§

è§"åœºæ™¯1"çš„"æ–¹æ¡ˆA"å®ç°ã€‚

---

**æŠ¥å‘Šç»“æŸ**
