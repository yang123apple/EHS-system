# éšæ‚£è½¯åˆ é™¤å’Œç¡¬åˆ é™¤åŠŸèƒ½å®ç°æ–‡æ¡£

## ğŸ“‹ å®ç°æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† EHS éšæ‚£æ’æŸ¥ç³»ç»Ÿä¸­**è½¯åˆ é™¤ï¼ˆSoft Deleteï¼‰**å’Œ**ç¡¬åˆ é™¤ï¼ˆHard Deleteï¼‰**åŒé‡æœºåˆ¶çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚

---

## ğŸ—„ï¸ ä¸€ã€æ•°æ®åº“å±‚æ”¹é€ 

### 1.1 Prisma Schema ä¿®æ”¹

åœ¨ `HazardRecord` æ¨¡å‹ä¸­æ–°å¢è½¯åˆ é™¤ç›¸å…³å­—æ®µï¼š

```prisma
model HazardRecord {
  // ... åŸæœ‰å­—æ®µ ...
  
  // ğŸŸ¢ è½¯åˆ é™¤å­—æ®µï¼ˆç”¨äºå®¡è®¡å’Œæ¢å¤ï¼‰
  isVoided                Boolean   @default(false) // æ˜¯å¦å·²ä½œåºŸ
  voidReason              String? // ä½œåºŸåŸå› 
  voidedAt                DateTime? // ä½œåºŸæ—¶é—´
  voidedBy                String? // ä½œåºŸæ“ä½œäººä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼š{id, name, role}ï¼‰
  
  // ğŸŸ¢ ç´¢å¼•ä¼˜åŒ–
  @@index([isVoided])
  @@index([voidedAt])
}
```

### 1.2 æ•°æ®åº“è¿ç§»

å·²åˆ›å»ºè¿ç§»æ–‡ä»¶ï¼š`prisma/migrations/20260122_add_soft_delete_fields/migration.sql`

**æ‰§è¡Œè¿ç§»å‘½ä»¤ï¼š**
```bash
# å¼€å‘ç¯å¢ƒå¿«é€ŸåŒæ­¥
npx prisma db push

# ç”Ÿäº§ç¯å¢ƒæ­£å¼è¿ç§»
npx prisma migrate deploy

# é‡æ–°ç”Ÿæˆ Prisma Client
npx prisma generate
```

---

## ğŸ”§ äºŒã€API å®ç°

### 2.1 è½¯åˆ é™¤ APIï¼ˆä½œåºŸéšæ‚£ï¼‰

**æ–‡ä»¶è·¯å¾„ï¼š** `src/app/api/hazards/void/route.ts`

**åŠŸèƒ½è¯´æ˜ï¼š**
- å°†éšæ‚£æ ‡è®°ä¸º"å·²ä½œåºŸ"ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®
- ä¿ç•™å®Œæ•´çš„å®¡è®¡è½¨è¿¹
- è®°å½•ä½œåºŸåŸå› å’Œæ“ä½œäººä¿¡æ¯

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```typescript
POST /api/hazards/void
Content-Type: application/json

{
  "hazardId": "cuid_xxx",
  "reason": "å½•å…¥é”™è¯¯ï¼Œé‡å¤ä¸ŠæŠ¥"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "éšæ‚£å·²ä½œåºŸ",
  "data": {
    "id": "cuid_xxx",
    "code": "Hazard20260122001",
    "isVoided": true,
    "voidReason": "å½•å…¥é”™è¯¯ï¼Œé‡å¤ä¸ŠæŠ¥",
    "voidedAt": "2026-01-22T12:00:00.000Z"
  }
}
```

**æƒé™è¦æ±‚ï¼š** æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜å‡å¯æ‰§è¡Œ

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. æ ¡éªŒéšæ‚£æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥æ˜¯å¦å·²ä½œåºŸï¼ˆé¿å…é‡å¤æ“ä½œï¼‰
3. æ›´æ–° `isVoided = true`ï¼Œè®°å½•åŸå› å’Œæ“ä½œäºº
4. å†™å…¥å®¡è®¡æ—¥å¿—åˆ° `logs` å­—æ®µ
5. è®°å½•ç³»ç»Ÿæ—¥å¿—

---

### 2.2 ç¡¬åˆ é™¤ APIï¼ˆç‰©ç†åˆ é™¤ï¼‰

**æ–‡ä»¶è·¯å¾„ï¼š** `src/app/api/hazards/destroy/route.ts`

**åŠŸèƒ½è¯´æ˜ï¼š**
- ç‰©ç†åˆ é™¤éšæ‚£è®°å½•åŠæ‰€æœ‰å…³è”æ•°æ®
- æ¸…ç† MinIO ä¸­çš„å­¤å„¿æ–‡ä»¶
- é˜²æ­¢æ•°æ®æ³„éœ²å’Œå­˜å‚¨æµªè´¹

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```typescript
DELETE /api/hazards/destroy?id=cuid_xxx
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "éšæ‚£å·²ç‰©ç†åˆ é™¤",
  "data": {
    "hazardCode": "Hazard20260122001",
    "filesCleanup": {
      "total": 5,
      "cleaned": 5,
      "success": true
    },
    "relatedRecords": {
      "candidateHandlers": 2,
      "ccRecords": 3,
      "extensions": 1,
      "signatures": 1
    }
  }
}
```

**æƒé™è¦æ±‚ï¼š** âš ï¸ **ä»…é™ Admin ç”¨æˆ·**ï¼ˆ403 æƒé™æ ¡éªŒï¼‰

**ä¸šåŠ¡é€»è¾‘ï¼š**
1. ğŸ”’ æ ¡éªŒç”¨æˆ·è§’è‰²ï¼ˆé Admin ç›´æ¥è¿”å› 403ï¼‰
2. è·å–éšæ‚£å®Œæ•´ä¿¡æ¯ï¼ˆç”¨äºæ–‡ä»¶æ¸…ç†å’Œæ—¥å¿—ï¼‰
3. åœ¨äº‹åŠ¡ä¸­ä¾æ¬¡åˆ é™¤ï¼š
   - å€™é€‰å¤„ç†äººè®°å½•ï¼ˆ`HazardCandidateHandler`ï¼‰
   - æŠ„é€è®°å½•ï¼ˆ`HazardCC`ï¼‰
   - å»¶æœŸè®°å½•ï¼ˆ`HazardExtension`ï¼‰
   - ç­¾åè®°å½•ï¼ˆ`SignatureRecord`ï¼‰
   - éšæ‚£è®°å½•æœ¬èº«ï¼ˆ`HazardRecord`ï¼‰
4. æ¸…ç† MinIO æ–‡ä»¶ï¼ˆäº‹åŠ¡å¤–æ‰§è¡Œï¼Œå¤±è´¥ä¸å›æ»šï¼‰
5. è®°å½•ç³»ç»Ÿæ—¥å¿—

---

### 2.3 æŸ¥è¯¢åˆ—è¡¨ APIï¼ˆè§’è‰²è¿‡æ»¤ï¼‰

**æ–‡ä»¶è·¯å¾„ï¼š** `src/app/api/hazards/route.ts`

**ä¿®æ”¹è¯´æ˜ï¼š** åœ¨ GET ç«¯ç‚¹ä¸­æ·»åŠ åŸºäºè§’è‰²çš„è½¯åˆ é™¤è¿‡æ»¤é€»è¾‘

**æ ¸å¿ƒä»£ç ï¼š**
```typescript
// ğŸŸ¢ è½¯åˆ é™¤è¿‡æ»¤ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²å†³å®šæ˜¯å¦æ˜¾ç¤ºå·²ä½œåºŸæ•°æ®
if (isAdmin) {
  // ç®¡ç†å‘˜ï¼šæ˜¾ç¤ºæ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å·²ä½œåºŸçš„ï¼‰ï¼Œä¸æ·»åŠ è¿‡æ»¤æ¡ä»¶
  console.log('[Hazard GET] ç®¡ç†å‘˜æ¨¡å¼ï¼šæ˜¾ç¤ºæ‰€æœ‰éšæ‚£ï¼ˆåŒ…æ‹¬å·²ä½œåºŸï¼‰');
} else {
  // æ™®é€šç”¨æˆ·ï¼šåªæ˜¾ç¤ºæœªä½œåºŸçš„æ•°æ®
  where.isVoided = false;
  console.log('[Hazard GET] æ™®é€šç”¨æˆ·æ¨¡å¼ï¼šåªæ˜¾ç¤ºæœªä½œåºŸçš„éšæ‚£');
}
```

**è¡Œä¸ºè¯´æ˜ï¼š**

| ç”¨æˆ·è§’è‰² | æŸ¥è¯¢æ¡ä»¶ | æ˜¾ç¤ºå†…å®¹ |
|---------|---------|---------|
| æ™®é€šç”¨æˆ· | `isVoided = false` | åªæ˜¾ç¤ºæœ‰æ•ˆéšæ‚£ |
| ç®¡ç†å‘˜ | æ—  `isVoided` è¿‡æ»¤ | æ˜¾ç¤ºæ‰€æœ‰éšæ‚£ï¼ˆå«ä½œåºŸï¼‰ |

**å‰ç«¯å±•ç¤ºå»ºè®®ï¼š**
- ç®¡ç†å‘˜æŸ¥çœ‹æ—¶ï¼Œå¯¹å·²ä½œåºŸçš„éšæ‚£è¿›è¡Œç‰¹æ®Šæ ‡è®°ï¼ˆå¦‚ç½®ç°ã€æ·»åŠ "å·²ä½œåºŸ"æ ‡ç­¾ï¼‰
- æä¾›"ä½œåºŸåŸå› "å’Œ"ä½œåºŸæ—¶é—´"çš„å±•ç¤º
- å¯é€‰ï¼šæä¾›"æ¢å¤"åŠŸèƒ½ï¼ˆå°† `isVoided` æ”¹å› `false`ï¼‰

---

## ğŸ¨ ä¸‰ã€å‰ç«¯é›†æˆç¤ºä¾‹

### 3.1 è½¯åˆ é™¤ï¼ˆä½œåºŸï¼‰æŒ‰é’®

```typescript
const handleVoidHazard = async (hazardId: string) => {
  const reason = prompt('è¯·è¾“å…¥ä½œåºŸåŸå› ï¼š');
  if (!reason) return;

  try {
    const response = await fetch('/api/hazards/void', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ hazardId, reason })
    });

    const result = await response.json();
    
    if (result.success) {
      message.success('éšæ‚£å·²ä½œåºŸ');
      refreshList(); // åˆ·æ–°åˆ—è¡¨
    } else {
      message.error(result.error || 'ä½œåºŸå¤±è´¥');
    }
  } catch (error) {
    message.error('ç½‘ç»œé”™è¯¯');
  }
};
```

### 3.2 ç¡¬åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰æŒ‰é’®

```typescript
const handleDestroyHazard = async (hazardId: string) => {
  // âš ï¸ äºŒæ¬¡ç¡®è®¤ï¼ˆç¡¬åˆ é™¤ä¸å¯æ¢å¤ï¼‰
  const confirmed = confirm(
    'è­¦å‘Šï¼šæ­¤æ“ä½œå°†ç‰©ç†åˆ é™¤éšæ‚£è®°å½•åŠæ‰€æœ‰å…³è”æ•°æ®ï¼Œæ— æ³•æ¢å¤ï¼\n\n' +
    'ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ'
  );
  if (!confirmed) return;

  try {
    const response = await fetch(`/api/hazards/destroy?id=${hazardId}`, {
      method: 'DELETE'
    });

    const result = await response.json();
    
    if (result.success) {
      message.success('éšæ‚£å·²ç‰©ç†åˆ é™¤');
      refreshList();
    } else {
      message.error(result.error || 'åˆ é™¤å¤±è´¥');
    }
  } catch (error) {
    message.error('ç½‘ç»œé”™è¯¯');
  }
};
```

### 3.3 åˆ—è¡¨å±•ç¤ºï¼ˆç®¡ç†å‘˜è§†å›¾ï¼‰

```typescript
interface HazardListItemProps {
  hazard: HazardRecord;
  userRole: string;
}

const HazardListItem: React.FC<HazardListItemProps> = ({ hazard, userRole }) => {
  const isVoided = hazard.isVoided;
  const isAdmin = userRole === 'admin';

  return (
    <div className={isVoided ? 'opacity-50' : ''}>
      <div className="flex items-center gap-2">
        <span>{hazard.code}</span>
        {isVoided && (
          <Tag color="red">å·²ä½œåºŸ</Tag>
        )}
      </div>
      
      {isVoided && isAdmin && (
        <div className="text-sm text-gray-500 mt-1">
          ä½œåºŸåŸå› ï¼š{hazard.voidReason}
          <br />
          ä½œåºŸæ—¶é—´ï¼š{formatDate(hazard.voidedAt)}
        </div>
      )}

      {/* æ“ä½œæŒ‰é’® */}
      <div className="flex gap-2 mt-2">
        {!isVoided && (
          <Button onClick={() => handleVoidHazard(hazard.id)}>
            ä½œåºŸ
          </Button>
        )}
        
        {isAdmin && (
          <Button 
            danger 
            onClick={() => handleDestroyHazard(hazard.id)}
          >
            ç‰©ç†åˆ é™¤
          </Button>
        )}
      </div>
    </div>
  );
};
```

---

## ğŸ” å››ã€æƒé™æ§åˆ¶

### 4.1 è½¯åˆ é™¤æƒé™

```typescript
// âœ… å…è®¸ï¼šæ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜
export const POST = withErrorHandling(
  withAuth(async (request, context, user) => {
    // æ— éœ€é¢å¤–æƒé™æ£€æŸ¥ï¼Œæ‰€æœ‰ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥ä½œåºŸè‡ªå·±ç›¸å…³çš„éšæ‚£
  })
);
```

### 4.2 ç¡¬åˆ é™¤æƒé™

```typescript
// âš ï¸ é™åˆ¶ï¼šä»…é™ Admin
export const DELETE = withErrorHandling(
  withAuth(async (request, context, user) => {
    if (user.role !== 'admin') {
      return NextResponse.json(
        { error: 'æƒé™ä¸è¶³ï¼šä»…ç®¡ç†å‘˜å¯æ‰§è¡Œç¡¬åˆ é™¤æ“ä½œ' },
        { status: 403 }
      );
    }
    // ... æ‰§è¡Œåˆ é™¤é€»è¾‘
  })
);
```

---

## ğŸ“Š äº”ã€å®¡è®¡è¿½è¸ª

### 5.1 è½¯åˆ é™¤å®¡è®¡

è½¯åˆ é™¤æ“ä½œä¼šåœ¨ä»¥ä¸‹ä½ç½®ç•™ä¸‹è®°å½•ï¼š

1. **HazardRecord è¡¨**
   - `isVoided = true`
   - `voidReason` - ä½œåºŸåŸå› 
   - `voidedAt` - ä½œåºŸæ—¶é—´
   - `voidedBy` - æ“ä½œäººä¿¡æ¯ï¼ˆJSONï¼‰

2. **logs å­—æ®µ**ï¼ˆéšæ‚£å†…éƒ¨æ—¥å¿—ï¼‰
   ```json
   {
     "operatorId": "user_xxx",
     "operatorName": "å¼ ä¸‰",
     "action": "ä½œåºŸéšæ‚£",
     "time": "2026-01-22T12:00:00.000Z",
     "changes": "ä½œåºŸåŸå› ï¼šå½•å…¥é”™è¯¯"
   }
   ```

3. **SystemLog è¡¨**ï¼ˆç³»ç»Ÿå®¡è®¡æ—¥å¿—ï¼‰
   - `module`: `hidden_danger`
   - `action`: `void`
   - `targetId`: `Hazard20260122001`ï¼ˆä¸šåŠ¡ç¼–å·ï¼‰

### 5.2 ç¡¬åˆ é™¤å®¡è®¡

ç¡¬åˆ é™¤æ“ä½œåªåœ¨ SystemLog ä¸­è®°å½•ï¼š

```json
{
  "module": "hidden_danger",
  "action": "destroy",
  "targetId": "Hazard20260122001",
  "details": "ç‰©ç†åˆ é™¤éšæ‚£è®°å½•åŠå…³è”æ•°æ®",
  "snapshot": {
    "filesCleanup": { "total": 5, "cleaned": 5 },
    "relatedRecords": {
      "candidateHandlers": 2,
      "ccRecords": 3,
      "extensions": 1,
      "signatures": 1
    }
  }
}
```

---

## âš™ï¸ å…­ã€æœ€ä½³å®è·µ

### 6.1 ä½•æ—¶ä½¿ç”¨è½¯åˆ é™¤ï¼Ÿ

âœ… **æ¨èåœºæ™¯ï¼š**
- å½•å…¥é”™è¯¯ï¼Œéœ€è¦é‡æ–°ä¸ŠæŠ¥
- è®¤å®šé”™è¯¯ï¼Œéšæ‚£åˆ†ç±»ä¸æ­£ç¡®
- é‡å¤ä¸ŠæŠ¥çš„éšæ‚£
- è¯¯æ“ä½œåˆ›å»ºçš„è®°å½•
- éœ€è¦ä¿ç•™å®¡è®¡è½¨è¿¹çš„åˆ é™¤

### 6.2 ä½•æ—¶ä½¿ç”¨ç¡¬åˆ é™¤ï¼Ÿ

âœ… **æ¨èåœºæ™¯ï¼š**
- æµ‹è¯•ç¯å¢ƒæ¸…ç†æµ‹è¯•æ•°æ®
- åˆè§„æ€§è¦æ±‚ï¼ˆå¦‚ GDPR æ•°æ®åˆ é™¤è¯·æ±‚ï¼‰
- æ¶æ„æ•°æ®æˆ–åƒåœ¾æ•°æ®æ¸…ç†
- å­˜å‚¨ç©ºé—´ä¼˜åŒ–ï¼ˆåˆ é™¤è¿‡æœŸæ•°æ®ï¼‰

âš ï¸ **æ³¨æ„äº‹é¡¹ï¼š**
- ç¡¬åˆ é™¤ä¸å¯æ¢å¤ï¼ŒåŠ¡å¿…äºŒæ¬¡ç¡®è®¤
- å»ºè®®åœ¨æ‰§è¡Œå‰å…ˆå¯¼å‡ºæ•°æ®å¤‡ä»½
- ä»…æˆæƒç®¡ç†å‘˜æ‰§è¡Œ
- è®°å½•å®Œæ•´çš„å®¡è®¡æ—¥å¿—

### 6.3 MinIO æ–‡ä»¶æ¸…ç†ç­–ç•¥

**å½“å‰å®ç°ï¼š**
- ç¡¬åˆ é™¤æ—¶è‡ªåŠ¨æ¸…ç†å…³è”æ–‡ä»¶
- å¤±è´¥ä¸å½±å“æ•°æ®åˆ é™¤ï¼ˆäº‹åŠ¡å¤–æ‰§è¡Œï¼‰
- è¿”å›æ¸…ç†ç»“æœä¾›ç”¨æˆ·æŸ¥çœ‹

**æœªæ¥ä¼˜åŒ–å»ºè®®ï¼š**
- å®ç°å®šæ—¶ä»»åŠ¡æ‰«æå­¤å„¿æ–‡ä»¶
- æä¾›æ‰‹åŠ¨æ–‡ä»¶æ¸…ç†æ¥å£
- å¢åŠ æ–‡ä»¶å¼•ç”¨è®¡æ•°æœºåˆ¶

---

## ğŸ§ª ä¸ƒã€æµ‹è¯•æ¸…å•

### 7.1 åŠŸèƒ½æµ‹è¯•

- [ ] æ™®é€šç”¨æˆ·å¯ä»¥ä½œåºŸéšæ‚£
- [ ] ç®¡ç†å‘˜å¯ä»¥ä½œåºŸéšæ‚£
- [ ] å·²ä½œåºŸçš„éšæ‚£æ— æ³•é‡å¤ä½œåºŸ
- [ ] æ™®é€šç”¨æˆ·æŸ¥è¯¢æ—¶ä¸æ˜¾ç¤ºå·²ä½œåºŸéšæ‚£
- [ ] ç®¡ç†å‘˜æŸ¥è¯¢æ—¶æ˜¾ç¤ºæ‰€æœ‰éšæ‚£ï¼ˆå«ä½œåºŸæ ‡è®°ï¼‰
- [ ] éç®¡ç†å‘˜æ‰§è¡Œç¡¬åˆ é™¤è¿”å› 403
- [ ] ç®¡ç†å‘˜å¯ä»¥ç‰©ç†åˆ é™¤éšæ‚£
- [ ] ç¡¬åˆ é™¤æ—¶æ­£ç¡®æ¸…ç†å…³è”æ•°æ®
- [ ] ç¡¬åˆ é™¤æ—¶æ­£ç¡®æ¸…ç† MinIO æ–‡ä»¶

### 7.2 å®¡è®¡æµ‹è¯•

- [ ] è½¯åˆ é™¤æ“ä½œå†™å…¥ logs å­—æ®µ
- [ ] è½¯åˆ é™¤æ“ä½œå†™å…¥ SystemLog è¡¨
- [ ] ç¡¬åˆ é™¤æ“ä½œå†™å…¥ SystemLog è¡¨
- [ ] å®¡è®¡æ—¥å¿—åŒ…å«å®Œæ•´çš„æ“ä½œäººä¿¡æ¯
- [ ] å®¡è®¡æ—¥å¿—åŒ…å«ä¸šåŠ¡ç¼–å·ï¼ˆéæ•°æ®åº“ IDï¼‰

### 7.3 æ€§èƒ½æµ‹è¯•

- [ ] æ·»åŠ ç´¢å¼•åæŸ¥è¯¢æ€§èƒ½æå‡
- [ ] è½¯åˆ é™¤è¿‡æ»¤ä¸å½±å“æŸ¥è¯¢é€Ÿåº¦
- [ ] ç¡¬åˆ é™¤äº‹åŠ¡æ‰§è¡Œæ—¶é—´å¯æ¥å—
- [ ] MinIO æ–‡ä»¶æ¸…ç†ä¸é˜»å¡å“åº”

---

## ğŸ“ å…«ã€æ³¨æ„äº‹é¡¹

1. **TypeScript ç±»å‹æ›´æ–°**
   - æ‰§è¡Œ `npx prisma generate` åï¼Œé‡å¯ VSCode TypeScript æœåŠ¡å™¨
   - å¿«æ·é”®ï¼š`Cmd+Shift+P` â†’ `TypeScript: Restart TS Server`

2. **æ•°æ®è¿ç§»**
   - ç°æœ‰æ•°æ®é»˜è®¤ `isVoided = false`ï¼ˆæœªä½œåºŸï¼‰
   - æ— éœ€æ‰‹åŠ¨ä¿®æ”¹å†å²æ•°æ®

3. **å‰ç«¯é€‚é…**
   - éœ€è¦æ›´æ–° `HazardRecord` ç±»å‹å®šä¹‰
   - æ·»åŠ  `isVoided`ã€`voidReason`ã€`voidedAt`ã€`voidedBy` å­—æ®µ

4. **æƒé™æ§åˆ¶**
   - ç¡¬åˆ é™¤æ¥å£å·²åš 403 æ ¡éªŒ
   - å‰ç«¯åº”éšè—éç®¡ç†å‘˜çš„ç¡¬åˆ é™¤æŒ‰é’®

---

## ğŸš€ ä¹ã€éƒ¨ç½²æ­¥éª¤

1. **æ•°æ®åº“è¿ç§»**
   ```bash
   npx prisma db push
   npx prisma generate
   ```

2. **é‡å¯åº”ç”¨**
   ```bash
   npm run build
   npm run start
   ```

3. **éªŒè¯åŠŸèƒ½**
   - æµ‹è¯•è½¯åˆ é™¤ API
   - æµ‹è¯•ç¡¬åˆ é™¤ APIï¼ˆç®¡ç†å‘˜è´¦å·ï¼‰
   - éªŒè¯æŸ¥è¯¢è¿‡æ»¤é€»è¾‘

4. **ç›‘æ§æ—¥å¿—**
   - è§‚å¯Ÿ SystemLog è¡¨ä¸­çš„å®¡è®¡è®°å½•
   - æ£€æŸ¥ MinIO æ–‡ä»¶æ¸…ç†æƒ…å†µ

---

## ğŸ“š åã€ç›¸å…³æ–‡æ¡£

- [Prisma Schema Reference](https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference)
- [Next.js API Routes](https://nextjs.org/docs/api-routes/introduction)
- [MinIO JavaScript Client](https://min.io/docs/minio/linux/developers/javascript/minio-javascript.html)

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0  
**åˆ›å»ºæ—¶é—´ï¼š** 2026-01-22  
**æœ€åæ›´æ–°ï¼š** 2026-01-22  
**è´Ÿè´£äººï¼š** EHS ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ
