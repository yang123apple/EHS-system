# WAL 增量备份说明

## 关于 WAL 文件

WAL（Write-Ahead Logging）文件是 SQLite 的增量备份文件，但它们**不能单独使用**来恢复数据。

## 重要限制

1. **需要主数据库文件**：WAL 文件必须配合主数据库文件（.db 文件）使用
2. **需要全量备份**：恢复增量备份前，必须先有一个全量备份（完整的 .db 文件）
3. **不能独立恢复**：只有 WAL 文件无法恢复数据

## 当前情况

- ✅ 有 21 个 WAL 增量备份文件（从 2026-01-10 16:00 到 2026-01-11 12:00）
- ❌ `data/backups/database/full` 目录为空，没有全量备份文件

## 如何恢复

### 选项1：如果有其他全量备份
1. 将全量备份文件（.db）放到 `data/backups/database/full` 目录
2. 运行恢复脚本：`npm run restore:database`
3. 选择"恢复全量备份 + 应用所有增量备份"

### 选项2：如果数据库文件还在
如果原始数据库文件还存在（如 `prisma/dev.db`），可以直接使用 WAL 文件：
1. 将最新的 WAL 文件复制到 `prisma/dev.db-wal`
2. 重启应用，SQLite 会自动应用 WAL 文件

### 选项3：重新初始化（当前已做）
如果无法找到全量备份，只能：
1. 重新运行种子文件（已完成）
2. 手动添加数据
3. 或导入 JSON 备份文件（如果有）

## 总结

**WAL 文件不能单独用来恢复数据**，它们需要配合主数据库文件使用。由于没有全量备份，这些 WAL 文件目前无法使用。

